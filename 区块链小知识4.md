#区块链小知识-什么是POW共识# 



#### POW工作量证明

POW是通过一个竞争机制（猜随机数），让整个账单算出一个符合系统规定的哈希数字。旷工的核心工作其实就是一直猜随机数。

![tu](https://ws1.sinaimg.cn/large/c1b251b3gy1fs1ghl55sdj20nm0j4gnk.jpg)

如上图是区块链的数据结构，所有的交易内容都被写死了，如交易1经过哈希后得到一个Hash1。如果交易1稍微改动了，那么Hash1这个字符串也完全不一样了。所以，当所有的交易确定下来之后，区块头的字段就只有一个Nonce可以改动，通过一直改变这个Nonce的值（通常要经过几十亿次的改变值）才能产生符合要求的目标哈希。

##### 什么样的目标哈希？

![image](http://wx3.sinaimg.cn/large/c1b251b3ly1ftubs3ah0nj20xj0e4tbv.jpg)

如上图是比特币浏览器最新区块展示的目标哈希，可以发现，目标哈希都是要求很多0开头的。所以多少个0就可以代表当前区块链的难度值了。

当你猜出一个数字是符合当前难度值（假设当前难度值要求十五个0开头）那么就代表猜出这个数字的旷工记账成功了。会得到当前区块的所有交易的交易费和系统奖励。

这个猜哈希的过程就是工作量证明的过程。当然，每一个旷工都可以猜哈希，谁的计算机能力越强，猜中哈希的概率也就越大，所以比特币有专门的矿机来猜这个随机值。

从上图可以看出，比特币大概是十分钟出一个块，时间会变动。当全世界的矿机增加的时候，猜到这个哈希的时间也就会变短。但是为什么比特币的平均出块时间还是十分钟呢？是因为难度值是动态变化的，如果全世界的矿机增加了。当前难度值就会增加（比如15个0变成18个0）。这样就保证了出块的速度，也就是交易被确认的速度一直保持稳定。

### POW优点

+ 算法简单，容易实现

+ 攻击成本高，要控制全世界50%的矿机才能比剩下的矿机优先计算出哈希。控制整个比特币的链

+ 平均主义，按劳分配

  ​

### POW缺点

+ 浪费资源，很明显这个猜的过程是耗电的
+ 出块时间太慢（十分钟才能收到一个确认，经过一小时才能基本保证不会被更改）

  ​