---
title: 区块链-共识机制
date: 2018-06-06 15:00:00
tags: block chain
---



[共识机制参考](https://shuwoom.com/?p=798)

### POW工作量证明

![tu](https://ws1.sinaimg.cn/large/c1b251b3gy1fs1ghl55sdj20nm0j4gnk.jpg)

目标哈希是具有一定难度值的哈希，比如要求十个零开头的哈希。这个难度值会随着全网络节点的算力（节点数量，过去平均产生块的时间）而动态变化，保证链条产生块的速度维持稳定。

而要得到目标哈希，从头部可以看出，只能更改Nonce的这个随机数。这个过程就是工作量证明

### POS权益证明

[参考](https://www.zhihu.com/question/263915518)

[参考2](https://charlesliuyx.github.io/2017/09/25/%E7%8E%B0%E4%BB%A3%E5%8C%BA%E5%9D%97%E9%93%BE%E4%B8%8E%E6%96%B0%E6%8A%80%E6%9C%AF/#%E6%9D%83%E7%9B%8A%E8%AF%81%E6%98%8E)

省去了旷工这个媒介，避免了POW的电力浪费。

> SHA256（SHA256（Bprev）,A ,t）≤balance(A)m

这其中，H为某个哈希函数；t为UTC时间戳；Bprev指的是上个区块；balance(A)代表账户A额余额。

唯一可以不断调整得到参数的是t，等式右边是某个固定实数，因此当balance(A)越大，找到合理的t概率越大，普遍对t的范围有所限制，如可尝试的时间不能超过标准时间戳一小时，也就是一个及诶单可以尝试7200次，一个账户的余额越多，就越容易发现下一个区块。

当你打开钱包客户端就会参与挖矿计算，挖矿的概率根据你的持有币的多少和币龄决定。

例如，你持有100个币，总共持有30天，你的币龄就是3000，此时，若你发现了一个PoS算法支持的区块（**直观来说就是你拥有币的数量和时间越长，你新建区块的几率越大**），你的币龄就会被置0。你每被清空365币龄，你将会从区块中获得0.05个币的利息（相当于年利率5%），那么在这个案例中，利息 = 3000 * 5% / 365 = 0.41个币。

也就是打开客户端就可以获得利息。你的挖矿收益和算力无关。



### DPOS 委任权益证明

POS参与出块就要求客户端必须打开，在DPOS权益证明下，更加进一步节约电能。让每个持有币的人进行投票产生101位代表，这101代表用于出块，出块的速度更快，每个块时间为10秒，一笔交易大概一分钟，6个确认。

### PBFT 实用拜占庭容错算法

拜占庭共识算法（Practical Byzantine Fault Tolerance- PBFT）也是一种常见的共识证明。它与之前两种都不相同，PBFT以计算为基础，也没有代币奖励。由链上所有人参与投票，少于（N-1）/3个节点反对时就获得公示信息的权利。

优点： 算法的可靠性有严格的数学证明，具备（n-1)/3容错性

缺点：当有1/3或以上记账人停止工作后，系统将无法提供服务。

















































